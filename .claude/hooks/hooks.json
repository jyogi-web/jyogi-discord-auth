{
  "description": "Spec Kit タスク進捗自動更新フック",
  "hooks": {
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "実装タスクが完了したか確認し、必要であればspecs/配下のtasks.mdを更新してください。\n\n確認項目：\n1. 今回のセッションで実装タスクが完了したか？\n2. specs/配下にtasks.mdが存在するか？（例: specs/001-jyogi-member-auth/tasks.md）\n3. 完了したタスクがtasks.md内で「- [ ]」（未完了）マークになっているか？\n\n完了タスクがある場合：\n- tasks.mdを読み込む（Readツール使用）\n- 完了したタスクの「- [ ]」を「- [X]」に更新\n- 必要に応じて✅マークや完了コメントを追加\n- Editツールでtasks.mdを更新\n\n完了タスクがない、またはtasks.mdが存在しない場合：\n- 何もせず、approveを返す\n\n最後に、hookの実行結果を以下のJSON形式で返してください：\n{\n  \"decision\": \"approve\",\n  \"systemMessage\": \"タスク進捗を更新しました（または更新の必要なし）\"\n}",
            "timeout": 45
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "実装ファイルが変更された場合、関連するタスクの進捗を記録します。\n\n確認項目：\n1. 変更されたファイル（$TOOL_INPUT）が実装コード（.go, .sql, .shなど）か？\n2. specs/配下にtasks.mdが存在するか？\n3. このファイル変更が特定のタスクに関連しているか？\n\nタスクに関連する実装の場合：\n- tasks.mdを確認（必要に応じてReadツール使用）\n- 該当タスクに進捗メモを追加（任意）\n- タスクが完了した場合は「- [ ]」を「- [X]」に更新\n\n関連しない、またはtasks.mdが存在しない場合：\n- 何もせず、通常の出力を返す\n\nhookの実行結果をsystemMessageで返してください。",
            "timeout": 30
          }
        ]
      }
    ]
  }
}
