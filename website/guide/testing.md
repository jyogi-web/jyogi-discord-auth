# テストガイド

じょぎメンバー認証システムのテスト実行方法について説明します。

## テストの種類

プロジェクトには主に2種類のテストが含まれています：

1. **ユニットテスト**: `internal` や `pkg` パッケージ内の個別のロジックをテストします。
2. **統合テスト**: `tests/integration` ディレクトリにあり、実際のAPIエンドポイントを呼び出してフロー全体をテストします。

## テストの実行

### Docker環境での実行（推奨）

Dockerを使用すると、分離された環境でテストを実行できます。これにより、ローカル環境の差異による問題を回避できます。

```bash
make test
```

このコマンドは `docker-compose run` を使用して、テスト用のコンテナ内で全テストを実行します。

### ローカル環境での実行

ローカルにGo環境が整っている場合は、直接テストを実行することも可能です。

```bash
make test-local
```

### 特定のパッケージのみテスト

Goの標準コマンドを使用して、特定のパッケージのみをテストできます。

```bash
go test ./pkg/discord/...
```

## テストのカバレッジ

`make test` コマンドは自動的にカバレッジレポート (`coverage.txt`) を生成します。
カバレッジを確認するには以下のコマンドを使用します：

```bash
go tool cover -html=coverage.txt
```

## CI/CD

GitHub Actionsにより、プルリクエスト作成時に自動的にテストが実行されます。
